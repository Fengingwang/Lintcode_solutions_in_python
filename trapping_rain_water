class Solution:
    """
    @param heights: a list of integers
    @return: a integer
    """
    def trapRainWater(self, heights):
        # write your code here
        if heights is None or len(heights) == 0:
            return 0
        
        res = 0
        i, j = 0, len(heights) - 1
        
        while i < j and heights[i] < heights[i + 1]:
            i += 1
            
        while i < j and heights[j] < heights[j - 1]:
            j -= 1
            
        while i < j:
            left = heights[i]
            right = heights[j]
            if left < right:
                while i < j and heights[i] <= left:
                    res += left - heights[i]
                    i += 1
            else:
                while i < j and heights[j] <= right:
                    res += right - heights[j]
                    j -= 1
                    
        return res 
